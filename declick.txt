Real-Time Vinyl De-Click Algorithm (DSP Core)
Target assumptions (adjustable)

Sample rate: 44.1 or 48 kHz

Latency budget: â‰¤ 5 ms

Click length: â‰¤ 0.5â€“1.0 ms

Stereo, process channels independently

ðŸ”— Processing Pipeline (overview)
Input
 â†“
High-Pass Filter (10â€“12 kHz)
 â†“
MAD-based Click Detector
 â†“
Click Validation (duration + energy)
 â†“
LPC-based Interpolation Repair
 â†“
Output

1ï¸âƒ£ High-Pass Filter (click emphasis)

Clicks are broadband, but HPF boosts detection reliability.

Design

2nd or 4th order Butterworth

Fc = 10â€“12 kHz

Linear phase not required (this is detection only)

hp[n] = highpass(x[n])

2ï¸âƒ£ Robust Click Detection (MAD)

This is critical. Do not use fixed thresholds.

Window sizes

Detection window: 0.5â€“1 ms
(â‰ˆ 32â€“48 samples @ 48k)

W = window around n

median = MEDIAN(hp[n-W : n+W])
mad = MEDIAN(|hp[n-W : n+W] - median|)

score = |hp[n] - median| / (mad + Îµ)

if score > THRESHOLD:
    mark sample as candidate

Good starting values

THRESHOLD = 6â€“10

Îµ = 1e-9

âœ… MAD adapts to music level
âœ… Resistant to cymbals compared to RMS

3ï¸âƒ£ Click Validation (avoid killing drums)

Group contiguous candidate samples into events.

event_length = samples_in_event
event_energy = sum(|hp[event]|)

Reject if:

event_length > MAX_LEN
â†’ protects snare hits

event_energy < MIN_ENERGY
â†’ ignore noise

Vinyl-safe values
Parameter	Value
MAX_LEN	0.5â€“1.0 ms
MIN_ENERGY	adaptive (median based)

Clicks are short and violent. Music transients are longer.

4ï¸âƒ£ LPC Repair (this is the â€œmagicâ€)

This is where pro tools separate themselves.

Step A: Define repair region
[xL ... CLICK ... xR]


Context on each side: 2â€“4 ms

Repair region: detected click samples

Step B: Compute LPC models

Use both sides for stability.

order = 12  // @ 48 kHz

aL = LPC(xL, order)
aR = LPC(reverse(xR), order)

Step C: Predict missing samples
for i in click_region:
    predL[i] = LPC_PREDICT(aL)
    predR[i] = LPC_PREDICT(aR)

Step D: Crossfade predictions
Î± = (i - start) / length
xÌ‚[i] = (1-Î±)*predL[i] + Î±*predR[i]


This avoids phase jumps and sounds shockingly transparent.

5ï¸âƒ£ Stereo handling (important!)

Detect clicks per channel

Repair per channel

Optional: if click detected in both within Â±1 sample â†’ treat as same event

Never average channels for repair.

6ï¸âƒ£ Real-Time Safety Notes

To stay real-time safe:

Fixed buffer sizes

No FFTs

Preallocate LPC buffers

Use Levinson-Durbin recursion

Latency = look-ahead window
â†’ ~3â€“5 ms total, totally acceptable for vinyl playback

7ï¸âƒ£ Vinyl-Specific Tuning (this matters)
For older / noisy records

Lower threshold (â‰ˆ 6)

Shorter MAX_LEN

Enable repeated micro-click suppression

For audiophile / clean records

Threshold 8â€“10

Conservative MAX_LEN

Less frequent activation

8ï¸âƒ£ What not to do âŒ

âŒ Simple low-pass filtering

âŒ Over-long repair windows

âŒ Fixed thresholds

âŒ Spectral gating in real time

These all destroy transients.

9ï¸âƒ£ Optional upgrades (later)

Prediction-error detector (AR residual)

Dual-band detector (HP + fullband)

STFT inpainting for long scratches (offline)

ML-based classifier (overkill for clicks)

10ï¸âƒ£ Minimal MVP feature checklist

If your plugin/box does only this, itâ€™s already good:

âœ” Adaptive MAD detection
âœ” Max click length limiter
âœ” LPC interpolation
âœ” Stereo-safe processing

That alone beats most â€œcheapâ€ de-clickers.